<app-page-header title="Create Account" [showBackButton]="true" (backButtonClick)="goBack()"></app-page-header>

<div class="sign-up-email-page-container">
  <div class="sign-up-content-wrapper">
    <h2 class="page-subtitle">
      Create your Washr account
    </h2>

    <form [formGroup]="signUpForm" (ngSubmit)="onSignUp()" class="sign-up-form">
      <mat-form-field appearance="outline" class="form-field full-width">
        <mat-label>Full Name</mat-label>
        <input matInput formControlName="displayName" placeholder="Enter your full name">

        @if (signUpForm.get('displayName')?.hasError('required') && signUpForm.get('displayName')?.touched) {
            <mat-error>Full Name is required.</mat-error>
          }      
      </mat-form-field>

      <mat-form-field appearance="outline" class="form-field full-width">
        <mat-label>Email</mat-label>
        <input matInput formControlName="email" type="email" placeholder="Enter your email" required>
        @if (signUpForm.get('email')?.hasError('required') && signUpForm.get('email')?.touched) {
          <mat-error>Email is required.</mat-error>
        }
        @if (signUpForm.get('email')?.hasError('email') && signUpForm.get('email')?.touched) {
          <mat-error>Please enter a valid email address.</mat-error>
        }
      </mat-form-field>

      <mat-form-field appearance="outline" class="form-field full-width">
        <mat-label>Password</mat-label>
        <input matInput formControlName="password" type="password" placeholder="Choose a password (min. 8 characters)" required>
        @if (signUpForm.get('password')?.hasError('required') && signUpForm.get('password')?.touched) {
          <mat-error>Password is required.</mat-error>
        }
        @if (signUpForm.get('password')?.hasError('minlength') && signUpForm.get('password')?.touched) {
          <mat-error>Password must be at least 8 characters.</mat-error>
        }
      </mat-form-field>

      <mat-form-field appearance="outline" class="form-field full-width">
        <mat-label>Confirm Password</mat-label>
        <input matInput formControlName="confirmPassword" type="password" placeholder="Repeat your password" required>
        @if (signUpForm.get('confirmPassword')?.hasError('required') && signUpForm.get('confirmPassword')?.touched) {
          <mat-error>Please confirm your password.</mat-error>
        }
        @if (signUpForm.hasError('passwordsNotMatching') && signUpForm.get('confirmPassword')?.touched && !signUpForm.get('confirmPassword')?.hasError('required')) {
          <mat-error>Passwords do not match.</mat-error>
        }
      </mat-form-field>

      @if (signUpError()) {
        <p class="form-error-message">{{ signUpError() }}</p>
      }

      <button mat-raised-button color="secondary" type="submit" class="action-button sign-up-button full-width" [disabled]="signUpForm.invalid">
        Create Account
      </button>
    </form>

    <p class="footer-text">
      Already have an account?
      <a routerLink="/auth/login" class="footer-link">
        Log in
      </a>
    </p>
  </div>
</div>